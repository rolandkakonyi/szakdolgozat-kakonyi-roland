<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="verify-v1" content="+J21X+3KbH1F9F9+Sel4Pab3hJlNw7mdm85lPLFeHVU=">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Language" content="en,sa">
<title>PHP Tutorials Examples Introduction to PHP PDO</title>

<link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.phpro.org/rss/all.rss">
<link href="Introduction-to-PHP-PDO_elemei/style.css" rel="stylesheet" type="text/css">
<link rel="shortcut icon" href="http://www.phpro.org/favicon.ico" type="image/x-icon"> 
</head>

<body>
<!--container starts -->
<div id="container">

<!--login starts -->

<div id="login">
<div style="display: none;" id="logged_in_panel">Welcome, <span id="username"></span> | <a href="">Logout</a></div>

<div style="" id="signup_panel">
<form action="" id="login_form" onkeypress="loginOnEnter(event)">
<table>
<tbody><tr>
<td>Login or <a href="">Register Now</a>&nbsp;&nbsp;</td>
<td>Email:&nbsp;<input maxlength="100" id="user_email" type="text"></td>
<td>Password:&nbsp;<input maxlength="50" id="password" type="password"></td>
<!-- <td>Remember Me:&nbsp;<input type="checkbox" id="remember_me"/></td> -->
<td class="login_button"><img id="login_button" src="Introduction-to-PHP-PDO_elemei/login-button.jpg" onclick="login()" class="login_button" alt=""></td>
<td id="messages" class="messages">&nbsp;</td>
</tr>
</tbody></table>
</form>
</div>
</div>
<!--login ends -->


<!--navigation starts -->

<div id="navigation">
<ul>
<li><a href="http://www.phpro.org/">Home</a></li>
<li><a href="http://www.phpro.org/tutorials">Tutorials</a></li>
<li><a href="http://www.phpro.org/articles">Articles</a></li>
<li><a href="http://www.phpro.org/examples">Examples</a></li>
<li><a href="http://www.phpro.org/projects">Projects</a></li>
<li><a href="http://www.phpro.org/classes">Classes</a></li>
<li><a href="http://www.phpro.org/manual">Manual</a></li>
<li><a href="http://www.phpro.org/contact">Contact</a></li>
</ul>
</div>

<!--logo starts -->
<div id="logo">
<a href="http://www.phpro.org/"><img src="Introduction-to-PHP-PDO_elemei/spork.jpg" alt="PHPRO.ORG" border="0"></a>
</div>
<!--logo ends -->

<!--info starts -->
<div id="content">
<div id="left">
<!--content starts -->

<div id="left">

<h1>Introduction to PHP PDO</h1>
<h1>Introduction to PHP PDO</h1>
<h2>(PHP Data Objects)</h2>
<div class="signature">by Kevin Waterson</div>
<h2>Contents</h2>
<ol>
<li><a href="#1">What is PDO</a></li>
<li><a href="#2">What Databases does PDO support</a></li>
<li><a href="#3">Where do I begin?</a></li>
<li><a href="#4">Connect to a Database</a>
 <ul>
 <li><a href="#4.1">Connect to PgSQL</a></li>
 <li><a href="#4.2">Connect to SQLite</a></li>
 <li><a href="#4.3">Connect to MySQL</a></li>
 <li><a href="#4.4">Connect to Firebird</a></li>
 <li><a href="#4.5">Connect to Informix</a></li>
 <li><a href="#4.6">Connect to Oracle</a></li>
 <li><a href="#4.7">Connect to  ODBC</a></li>
 <li><a href="#4.8">Connect to DBLIB</a></li>
 <li><a href="#4.9">Connect to IBM</a></li>
</ul>
</li>
<li><a href="#5">There is no five</a></li>
<li><a href="#6">Close a Database Connection</a></li>
<li><a href="#7">Query a Database</a>
 <ul>
 <li><a href="#7.1">INSERT</a></li>
 <li><a href="#7.2">SELECT</a></li>
 <li><a href="#7.3">UPDATE</a></li>
 </ul>
</li>
<li><a href="#8">Fetch Modes</a>
 <ul>
 <li><a href="#8.1">FETCH ASSOC</a></li>
 <li><a href="#8.2">FETCH NUM</a></li>
 <li><a href="#8.3">FETCH BOTH</a></li>
 <li><a href="#8.4">FETCH OBJECT</a></li>
 <li><a href="#8.5">FETCH LAZY</a></li>
 <li><a href="#8.6">FETCH CLASS</a></li>
 <li><a href="#8.7">FETCH INTO</a></li>
 </ul>
</li>
<li><a href="#9">Error Handling</a></li>
<li><a href="#10">Prepared Statements</a></li>
<li><a href="#11">Transactions</a></li>
<li><a href="#12">Get Last Insert ID</a></li>
<li><a href="#13">Global Instance</a></li>
<li><a href="#50">Conclusions</a></li>
</ol>

<a class="anchor" name="1"><h2>What is PDO.</h2></a>
<p>
PDO is a PHP extension to formalise PHP's database connections by creating a uniform
interface. This allows developers to create code which is portable across many databases and platforms.
PDO is _not_ just another abstraction layer like PearDB although PearDB may use PDO as a backend. Those
of you familiar with Perls DBI may find the syntax disturbingly familiar.
</p>
<h3>Note: Your must read the section on <a href="#9">Error Handling</a> to benifit from this tutorial</h3>
<p>
During this tutorial we will be using a database called animals, which, 
as you might have guessed, is a database of animals, genius! The animals
 table is described here.
</p>
<div class="displaybox">
CREATE TABLE animals (
animal_id   MEDIUMINT(8) NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
animal_type VARCHAR(25)  NOT NULL,<br>
animal_name VARCHAR(25)  NOT NULL <br>
) ENGINE = MYISAM ;<br>
<br>
INSERT INTO `animals` (`animal_id`, `animal_type`, `animal_name`) VALUES<br>
(1, 'kookaburra', 'bruce'),<br>
(2, 'emu', 'bruce'),<br>
(3, 'goanna', 'bruce'),<br>
(4, 'dingo', 'bruce'),<br>
(5, 'kangaroo', 'bruce'),<br>
(6, 'wallaby', 'bruce'),<br>
(7, 'wombat', 'bruce'),<br>
(8, 'koala', 'bruce');<br>
</div>
<a class="anchor" name="2"><h2>What databases does PDO support?</h2></a>
<p>
PDO supports many of the popular databases as seen on the list below.
</p>
<ul>
<li> DBLIB: FreeTDS / Microsoft SQL Server / Sybase</li>
<li> Firebird (http://firebird.sourceforge.net/): Firebird/Interbase 6</li>
<li> IBM (IBM DB2)</li>
<li> INFORMIX - IBM Informix Dynamic Server</li>
<li> MYSQL (http://www.mysql.com/): MySQL 3.x/4.0</li>
<li> OCI (http://www.oracle.com): Oracle Call Interface</li>
<li> ODBC: ODBC v3 (IBM DB2 and unixODBC)</li>
<li> PGSQL (http://www.postgresql.org/): PostgreSQL</li>
<li> SQLITE (http://sqlite.org/): SQLite 3.x</li>
</ul>

<p>
To see if the PDO driver is available for your database, check phpinfo()
 and you should have a section named PDO and another pdo_mysql or 
pdo_sqlite depending on your choice of database. You may also check the 
available drivers with the static method PDO::getAvailableDrivers().
</p>
<div class="codebox">
<code><span style="color: #000000">
<br><span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">foreach(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">getAvailableDrivers</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$driver</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$driver</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
To enable PDO simply configure --enable-pdo and --with-pdo_sqlite --with_pdo_mysql or whatever database needs supporting by PDO.
</p>
<p>
Windows users will need to un-comment the appropriate line in php.ini and restart the web server.
</p>

<h2><a class="anchor" name="3">Where do I begin?</a></h2>
<p>
If you are reading this you are more than likely to have connected to a 
database using PHP before using a database specific function such as <a href="http://www.php.net/mysql-connect">mysql_connect()</a> or <a href="http://www.php.net/pg-connect">pg_connect</a>
 or, for the truely evolved coder, SQLite. To use PDO with your database
 you need to have the correct PDO driver installed for it. For the 
SQLite PDO driver you need to configure PHP --with-pdo-sqlite. If you 
are using a RPM based system there are pdo-sqlite.rpm's available. 
Before we go any further, lets connect to a database and see what all 
the fuss is about.
</p>

<h2><a class="anchor" name="4">Connect to a database</a></h2>
<p>
Every interaction with a database begins with a connection. Regardless 
of the database you use, you must connect first and establish a database
 handler. After connecting you your database of choice, much of the PDO 
methods are similar. This is why PDO is such a powerful and useful tool 
for PHP. Here we show how to connect to various databases and establish a
 database handler object that we can use for further interaction with 
the database.
</p>
<h2><a class="anchor" name="4.1">Connect with PgSQL</a></h2>
<p>
As mentioned above, you may have previously tried to connect to a PgSQL database using pg_connect. Here we connect with PDO.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"pgsql:dbname=pdo;host=localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"&nbsp;</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"PDO&nbsp;connection&nbsp;object&nbsp;created"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>

<p>So that was a bit of a no-brainer to start with, we see the use of 
"new" to create the PDO object followed by the database type username 
and password. This should be familiar to most people who have connected 
to a database before using traditional methods.. As we have used try{} 
and catch(){} we see upon failure that an exception is thrown with the 
error message "could not find driver". This tells us the PDO_PGSQL 
driver is not present and needs to be loaded. As noted, an exception is 
thrown. PDO can handle errors in several ways, more on this later.<br>
How did it connect to the database?<br>
The database connection is handled internally by PDO's __construct() and this represents our database connection.
</p>
<p>
Lets see what happens if we try to connect to database as we did above without catching the exception and see what happens..
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>&nbsp;$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"pgsql:dbname=no_database;host=localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"&nbsp;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
From the above snippet you will get a result something like this below
</p>
<div class="displaybox">
Fatal error: Uncaught exception 'PDOException' with message 'could not 
find driver' in /www/pdo.php:2 Stack trace: #0 /www/pdo.php(2): 
PDO-&gt;__construct('pgsql:dbname=pd...', 'username', 'password') #1 
{main} thrown in /www/pdo.php on line 2
</div>
<p>
This is the default behaviour when an exception is not caught, a 
backtrace is generated and the script is terminated. As you can see, all
 the information is dumped including the file path and the database 
username and password. It is the responsibility of the coder to catch 
exceptions or to deal with the errors using set_exception_handler() 
function to prevent this happening. More about handling errors and 
exceptions later.
</p>


<h2><a class="anchor" name="4.2">Connect to SQLite</a></h2>
<p>
When PDO is used with SQLite, database creation becomes even easier. 
Simply specify the path to the database file and it will be loaded. If 
the database file does not exist, PDO will attempt to create it. Lets 
see how we go with the same code but change the database to SQLite.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;connect&nbsp;to&nbsp;SQLite&nbsp;database&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"sqlite:/path/to/database.sdb"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
Because the database path does not exist and cannot be created, an 
exception is thrown, the exception is caught in the catch block and the 
error message is displayed with $e-&gt;Message(). Now that we know how 
to create a database, we can create tables and INSERT some data.
</p>
<p>
Another feature of SQLite is the ability to create tables in memory. 
This can be amazingly helpful if you wish to create tempory databases or
 tables or even for development code.
</p>

<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;connect&nbsp;to&nbsp;SQLite&nbsp;database&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"sqlite::memory"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;a&nbsp;little&nbsp;message&nbsp;to&nbsp;say&nbsp;we&nbsp;did&nbsp;it&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'database&nbsp;created&nbsp;in&nbsp;memory'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
We see above that a database is created in memory and a message is 
displayed to let us know. If the creation of the database failed, a PDO 
exception would be thrown and the script terminated at that point, 
passing control to the catch block.
</p>

<h2><a class="anchor" name="4.3">Connect to MySQL</a></h2>
<p>
MySQL is the choice of many web developers and will be used as the 
database of choice for much of this tutorial. Here we see how to connect
 to a MySQL database.
</p>
<div class="codebox">
<code><span style="color: #000000">
<br><span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=mysql"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>

<h2><a class="anchor" name="4.4">Connect to Firebird</a></h2>
<p>

Often used by developers using windows, Firebird is a good database and connection is just as simple as the examples above.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"firebird:dbname=localhost:C:\Programs\Firebird\DATABASE.FDB"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"SYSDBA"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"masterkey"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="4.5">Connect to Informix</a></h2>
<p>
Informix is popular with many windows users also, this example shows how
 to connect to an informix database cataloged as InformixDB in odbc.ini:
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"informix:DSN=InformixDB"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="4.6">Connect to Oracle</a></h2>
<p>
The Oracle database is used by many 'enterprise' companies but these 
days there are sleeker options. Lets see a simple connection to Oracle
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"OCI:"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
This works fine for a simple Oracle connection. The oracle driver may 
take two optional parameters, The database name, and the character set. 
To connect with a database name of "accounts" and a charset of UTF-8 the
 following code should be used.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"OCI:dbname=accounts;charset=UTF-8"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="4.7">Connect to ODBC</a></h2>
<p>
There are many connections ODBC can create, here we show how to connect 
to a MS Access database named accounts. The specified path is 
c:\\accounts.mdb.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"odbc:Driver={Microsoft&nbsp;Access&nbsp;Driver&nbsp;(*.mdb)};Dbq=C:\accounts.mdb;Uid=Admin"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="4.8">Connect to DBLIB</a></h2>
<p>
Once again a Windows specific database, DBLIB can be used as follows
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">10060</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbname&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"my_database"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"dblib:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">:</span><span style="color: #0000BB">$port</span><span style="color: #DD0000">;dbname=</span><span style="color: #0000BB">$dbname</span><span style="color: #DD0000">"</span><span style="color: #007700">,</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">"</span><span style="color: #007700">,</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$password</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="4.9">Connect to IBM</a></h2>
<p>
This example shows connecting to an IBM DB2 database named accounts
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"ibm:DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=accounts;&nbsp;HOSTNAME=1.2.3,4;PORT=56789;PROTOCOL=TCPIP;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>

<h2><a class="anchor" name="6">Close a Database Connection</a></h2>
<p>
Up to this point we have seen how to connect to a database using PDO. 
But of course, we also need to disconnect when we have finished. To 
close the connection the object needs to be destroyed so that no 
reference to it remains. This is normally done at the end of a script 
where PHP will automatically close the connection. However, the 
connection may be close implicitly by assigning the value of <span class="codechar">null</span> to the object as seen below.
</p><p>
</p><div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=mysql"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
If the database connection fails, the code to assign a null value is 
never called as the exception throws control to the catch block.
</p>

<h2><a class="anchor" name="7">PDO Query</a></h2>
<p>
Now that we can open and close a connection to the database with PDO, we
 can make use of it for what databases are made for, storing and 
retrieving information. The simplest form of query is the PDO query 
method. As the name suggests, this is used to perform database queries. 
Before we begin to query a database, lets create a small database with a
 table for animals. This will be a MySQL database for use throughout 
much of this tutorial. Remember, because PDO provides a common set of 
tools for databases, once we have the correct connection, the rest of 
the code is the same, regardless of the database you choose. When using 
PDO to query a database, the function used to do so depends on the 
statement you wish to send to the database. Below we will see three 
queries on how to INSERT, SELECT and UPDATE.
</p>
<h2><a class="anchor" name="7.1">INSERT</a></h2>
<p>
To gather information from a database, we first need to put some info 
into it. We use the same code from above to connect and disconnect from 
the database and the INSERT query is accomplished using the PDO::exec 
method.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;INSERT&nbsp;data&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('kiwi',&nbsp;'troy')"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;the&nbsp;number&nbsp;of&nbsp;affected&nbsp;rows&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
The output of the script above will look like this:
</p>
<div class="displaybox">
Connected to database<br>
1
</div>
<p>
This shows us that we connected successfully to the database and then we
 have displayed the number of affected rows. PDO::exec returns the 
number of affected rows if successful, or zero (0) if no rows are 
affected. This may cause issues if you are checking for a boolean value 
and why it is recommended using === when to check for type also, as zero
 (0) may evaluate to boolean FALSE.
</p>
<p>
The PDO::exec method should be used for SQL statements that do not 
return a result set. We could use this same method to INSERT many more 
animals to our database, but a more effecient method would be to use a 
transaction. This is covered in the <a href="#11">section on Transactions</a>.
</p>
<h2><a class="anchor" name="7.2">SELECT</a></h2>
<p>
Unlike PDO::exec the PDO::query method returns a result set, that is, a 
group of information from the database in the form of a PDOStatement 
object. Our database should look a little like the example in the <a href="#1">What is PDO</a> section. Using this we can SELECT information.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>
<p>
From the script above, we can expect the results to look like this:
</p>
<div class="displaybox">
Connected to database<br>
emu - bruce<br>
funnel web - bruce<br>
lizard - bruce<br>
dingo - bruce<br>
kangaroo - bruce<br>
wallaby - bruce<br>
wombat - bruce<br>
koala - bruce<br>
kiwi - troy
</div>
<p>
You will have noticed that we can iterate over the result set directly 
with foreach. This is because internally the PDO statement implements 
the SPL traversble iterator, thus giving all the benifits of using SPL. 
For more on SPL refer to the <a href="http://www.phpro.org/tutorials/Introduction-to-SPL.html">Introduction to SPL</a>
 page. The greatest benifit of this is that SPL iterators know only one 
element at a time and thus large result sets become manageable without 
hogging memory.
</p>


<h2><a class="anchor" name="7.3">UPDATE</a></h2>
<p>
To update a field in a database with PDO we once again use the PDO::exec method in the same manner as we did with the <a href="#7.1">INSERT</a>
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;INSERT&nbsp;data&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"UPDATE&nbsp;animals&nbsp;SET&nbsp;animal_name='bruce'&nbsp;WHERE&nbsp;animal_name='troy'"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;the&nbsp;number&nbsp;of&nbsp;affected&nbsp;rows&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
Once again we see that the connection is made to the database and one 
row is affected as now the kiwi has become a true Australian like the 
rest of the creatures. PDO::exec should be used for all database queries
 where no result set is required.
</p>

<h2><a class="anchor" name="8">FETCH Modes</a></h2>

<p>
The section above showed how using PDO::query we can fetch information 
from the database. The PDO::query method returns a PDOStatement object 
that can be utilized in much the same was as mysql_fetch_object() or 
pg_fetch_object(). Of course there are times when an numerical index is 
needed or an associative index. PDO::query provides for this also by 
allowing the coder to set the fetch mode for via the PDOStatement object
 or via PDOStatement::setFetchMode().
</p>
<h3><a class="anchor" name="8.1">FETCH ASSOC</a></h3>
<p>
To fetch an associative array from our results the constant 
PDO::FETCH_ASSOC is used and returns the column names as indexes or keys
 of the resulting array.
</p><div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;number&nbsp;of&nbsp;columns&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_ASSOC</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;object&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$val</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The above code will give a result like this:
</p>
<div class="displaybox">
Connected to database<br>
animal_id - 1<br>
animal_type - emu<br>
animal_name - bruce
</div>
<p>
PDO has returned the results as a PDOStatement object that we can 
iterate over directly. The resulting indexes are the names of the fields
 within the animals database.
</p>

<h3><a class="anchor" name="8.2">FETCH NUM</a></h3>
<p>
Like PDO::FETCH_ASSOC, the PDO::FETCH_NUM produces a numerical index of the result set rather than the field names.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;number&nbsp;of&nbsp;columns&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_NUM</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;object&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$val</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The above code will give a result like this:
</p>
<div class="displaybox">
Connected to database<br>
0 - 1<br>
1 - emu<br>
2 - bruce
</div>
<p>
As you can see above the indexes are now numeric in the result set
</p>

<h3><a class="anchor" name="8.3">FETCH BOTH</a></h3>
<p>
There may be times you need to fetch both numerical and associative 
indexes. PDO::FETCH_BOTH produces a numerical and associative index of 
the result set so you can use either, or both.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;number&nbsp;of&nbsp;columns&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_BOTH</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;object&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$val</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
Now we see the results have included both indexes.
</p>
<div class="displaybox">
Connected to database<br>
animal_id - 1<br>
0 - 1<br>
animal_type - emu<br>
1 - emu<br>
animal_name - bruce<br>
2 - bruce
</div>

<h3><a class="anchor" name="8.4">FETCH OBJECT</a></h3>
<p>
This little gem takes the result set and returns it as an anonymous 
object or stdClass and maps the field names from the database as object 
properties with the values the values of stored in the database.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;number&nbsp;of&nbsp;columns&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_OBJ</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;object&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_id</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_type</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_name</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The above code gives the results like this:
</p>
<div class="displaybox">
Connected to database<br>
1<br>
emu<br>
bruce
</div>
<p>
The use of the field names as class properties makes integrating results into an Object Oriented envioronment simple.
</p>


<h3><a class="anchor" name="8.5">FETCH LAZY</a></h3>
<p>
PDO::FETCH_LAZY is odd as it combines PDO::FETCH_BOTH and 
PDO::FETCH_OBJ. I am unsure why you would want to do this, but it must 
have been important enough for somebody to create it. The code below is 
that of PDO::FETCH_BOTH and is reproduced here for examples sake.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;number&nbsp;of&nbsp;columns&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_BOTH</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;object&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$val</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The above code will give a result the same as that of PDO::FETCH_BOTH. Genius!
</p>



<h3><a class="anchor" name="8.6">FETCH CLASS</a></h3>
<p>
PDO::FETCH_CLASS instantiates a new instance of the specified class. The
 field names are mapped to properties (variables) within the class 
called. This saves quite a bit of code and speed is enhanced as the 
mappings are dealt with internally.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">animals</span><span style="color: #007700">{<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">;<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_type</span><span style="color: #007700">;<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***<br>&nbsp;*<br>&nbsp;*&nbsp;@capitalize&nbsp;first&nbsp;words<br>&nbsp;*<br>&nbsp;*&nbsp;@access&nbsp;public<br>&nbsp;*<br>&nbsp;*&nbsp;@return&nbsp;string<br>&nbsp;*<br>&nbsp;*/<br></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">capitalizeType</span><span style="color: #007700">(){<br>&nbsp;return&nbsp;</span><span style="color: #0000BB">ucwords</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_type</span><span style="color: #007700">);<br>}<br><br>}&nbsp;</span><span style="color: #FF8000">/***&nbsp;end&nbsp;of&nbsp;class&nbsp;***/<br><br>/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;the&nbsp;animals&nbsp;class&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchALL</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_CLASS</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'animals'</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;of&nbsp;the&nbsp;object&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;call&nbsp;the&nbsp;capitalizeType&nbsp;method&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">capitalizeType</span><span style="color: #007700">().</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The code above produces a list of animal types, with the first letter capitalized like this:
</p>
<div class="displaybox">
Connected to database<br>
Emu<br>
Funnel Web<br>
Lizard<br>
Dingo<br>
Kangaroo<br>
Wallaby<br>
Wombat<br>
Koala<br>
Kiwi
</div>
<p>
The PDO::FETCH_CLASS constant has fetched the results directly into the 
animals class where we were able to directly manipulate the results, 
nifty.
</p>
<p>
PDO provides an alternative to PDO::fetch and PDO::FETCH_CLASS. 
PDOStatement::fetchObject() will bundle them together to give the same 
result as shown here.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">animals</span><span style="color: #007700">{<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">;<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_type</span><span style="color: #007700">;<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***<br>&nbsp;*<br>&nbsp;*&nbsp;@capitalize&nbsp;first&nbsp;words<br>&nbsp;*<br>&nbsp;*&nbsp;@access&nbsp;public<br>&nbsp;*<br>&nbsp;*&nbsp;@return&nbsp;string<br>&nbsp;*<br>&nbsp;*/<br></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">capitalizeType</span><span style="color: #007700">(){<br>&nbsp;return&nbsp;</span><span style="color: #0000BB">ucwords</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_type</span><span style="color: #007700">);<br>}<br><br>}&nbsp;</span><span style="color: #FF8000">/***&nbsp;end&nbsp;of&nbsp;class&nbsp;***/<br><br>/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;the&nbsp;animals&nbsp;class&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animals&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchObject</span><span style="color: #007700">(</span><span style="color: #DD0000">'animals'</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;the&nbsp;class&nbsp;properties&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_id</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">capitalizeType</span><span style="color: #007700">().</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_name</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The above code gives the results like this:
</p>
<div class="displaybox">
Connected to database<br>
1<br>
Emu<br>
bruce
</div>
<p>
Note that we have called the animals::capitalizeType() method to show 
that we are in fact working with an instance of the animals class. 
PDO::fetchObject() will also work as a substitute for PDO::FETCH_OBJ.
</p>

<h3><a class="anchor" name="8.7">FETCH INTO</a></h3>
<p>
The PDO::FETCH_INTO constant allows us to fetch the data into an 
existing instance of a class. Like PDO::FETCH_CLASS the field names are 
mapped to the class properties. With this in mind, we should be able to 
replicate the behaviour of PDO::FETCH_CLASS by instantiating the new 
object when setting the fetch mode. In this instance, the fetch mode is 
set using PDO::setFetchMode() method.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">animals</span><span style="color: #007700">{<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">;<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_type</span><span style="color: #007700">;<br><br>public&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">;<br><br><br>public&nbsp;function&nbsp;</span><span style="color: #0000BB">capitalizeType</span><span style="color: #007700">(){<br>&nbsp;return&nbsp;</span><span style="color: #0000BB">ucwords</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_type</span><span style="color: #007700">);<br>}<br><br>}&nbsp;</span><span style="color: #FF8000">/***&nbsp;end&nbsp;of&nbsp;class&nbsp;***/<br><br>/***&nbsp;instantiate&nbsp;a&nbsp;new&nbsp;animals&nbsp;instance&nbsp;***/<br></span><span style="color: #0000BB">$animals&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">animals</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'crocodile'</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">animal_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;into&nbsp;an&nbsp;PDOStatement&nbsp;object&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;fetch&nbsp;mode&nbsp;with&nbsp;PDO::setFetchMode()&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFetchMode</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_INTO</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">animals</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;PDOStatement&nbsp;directly&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$animals</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">capitalizeType</span><span style="color: #007700">().</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
Once again, the above code produces a list of animal types, with the first letter capitalized like this:
</p>
<div class="displaybox">
Connected to database<br>
Emu<br>
Funnel Web<br>
Lizard<br>
Dingo<br>
Kangaroo<br>
Wallaby<br>
Wombat<br>
Koala<br>
Kiwi
</div>


<h2><a class="anchor" name="9">Error Handling</a></h2>
<p>
PDO error handling is comes in several flavours. Previously in this 
tutorial we have have only used the simplest of try{} catch(){} blocks 
to catch an error in the database connection, but what of other errors? 
perhaps a field name does not exist? Lets see how we go with a simple 
error with the previous code.
</p>

<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;with&nbsp;incorrect&nbsp;fieldname&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;username&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
The above script will produce an error such as this:
</p>
<div class="displaybox">
Connected to database<br>
<br>
Warning: Invalid argument supplied for foreach() in /www/pdo.php on line 18
</div>
<p>
This is because there is no error handling. The SELECT statement has a 
field name 'username' which does not exist and an error is generated by 
the database. The only default error handling is done with the initial 
connection. Unless we deal with the error, we have a problem with 
displaying full path to the world. To deal with this we need to set an 
attribute to the type of error handling we wish to utilize. The types of
 error handling are<br>
Exception<br>
Warning<br>
Silent<br>
Lets begin with exception as we have the try{} catch(){} blocks in place already.
</p>

<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;username&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
Now with the error mode set to Exception the error generated looks like this:
</p>
<div class="displaybox">
Connected to database<br>
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'username' in 'field list'
</div>
<p>
Normally we would not show this type of error to the end user, and the 
exception would be handled perhaps with message saying No Results Found 
or something vague, but this does show how we can set the error mode as 
we wish. To set the error mode to Warning should look easy from here.
</p><div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_WARNING</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;username&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
Now a different error is displayed.
</p>
<div class="displaybox">
Connected to database<br>
<br>
Warning: PDO::query() [function.PDO-query]: SQLSTATE[42S22]: Column not 
found: 1054 Unknown column 'username' in 'field list' in /www/pdo.php on
 line 21<br>
<br>
Warning: Invalid argument supplied for foreach() in /www/pdo.php on line 21
</div>
<p>
Here and E_WARNING has been generated and if display_errors is on the 
error would be seen by an end user. It is hoped that if you are in a 
production environment this is not the case.
</p>
<p>
Lastly, there is the Silent mode. As the name suggests, this mode 
silences the errors so no output is sent from the error. However, it 
does not stop the code at the point of error and any further errors are 
still sent.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_SILENT</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;The&nbsp;SQL&nbsp;SELECT&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;username&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
Now we see the script above produces the following output.
</p>
<div class="displaybox">
Connected to database<br>
<br>
Warning: Invalid argument supplied for foreach() in /www/pdo.php on line 21
</div>
<p>
As you can see, the error has been silenced, but the following error has
 not been attended to, and would need further checks to ensure the value
 passed to the foreach is a valid arguement. 
</p>
<p>
As we saw with the exception code, the SQLSTATE code was part of the 
error message. This error code is also available with the 
PDO::errorCode() method.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">/***&nbsp;an&nbsp;invalide&nbsp;fieldname&nbsp;***/<br></span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;username&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;run&nbsp;the&nbsp;query&nbsp;***/<br></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/***&nbsp;show&nbsp;the&nbsp;error&nbsp;code&nbsp;***/<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errorCode</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
The code above shows the error code relevant to the SQLSTATE. This is a 
five character string as defined by the ANSI SQL standard.
</p>
<div class="displaybox">
Connected to database<br>
42S22
</div>
<p>
Further information about an error may be gained from the 
PDO::errorInfo() method. This returns an array containing the SQLSTATE, 
the error code, and the error message.
</p><div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #FF8000">/***&nbsp;an&nbsp;invalid&nbsp;table&nbsp;name&nbsp;***/<br></span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;animal_id&nbsp;FROM&nbsp;users"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;run&nbsp;the&nbsp;query&nbsp;***/<br></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/***&nbsp;show&nbsp;the&nbsp;error&nbsp;info&nbsp;***/<br></span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errorInfo</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
With this code, the error information looks like this:
</p>
<div class="displaybox">
Connected to database<br>
42S02<br>
1146<br>
Table 'animals.users' doesn't exist
</div>
<p>
If there is no error, the SQLSTATE will be the only value shown, with a value of 00000.
</p>


<h2><a class="anchor" name="10">Prepared statements</a></h2>
<p>
What is a prepared statement? A prepared statement is a pre-compiled SQL
 statement that accepts zero or more named parameters. Ok, so thats my 
attempt at describing what it is, if you have a better description, <a href="http://www.phpro.org/contact/">let us know</a>.
</p>
<p>
The SQL is prepared for execution. This is especially useful when using 
the same statement or query multiple times with different parameters, or
 field values. The boost in speed is hidden from userland code as the 
PDO driver allows client and server side caching of the query and meta 
data. It also helps prevent SQL injection by calling the PDO::quote() 
method internally. 
</p><p>
</p><p>
PDO accepts two kinds of parameter markers.<br>
named - :name<br>
question mark - ?<br>
You must choose one or the other, they cannot be mixed.
</p>
<p>
Lets dive in and have a look at how PDO::prepare and PDOStatement::execute work together.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;some&nbsp;variables&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;prepare&nbsp;the&nbsp;SQL&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals&nbsp;WHERE&nbsp;animal_id&nbsp;=&nbsp;:animal_id&nbsp;AND&nbsp;animal_name&nbsp;=&nbsp;:animal_name"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;bind&nbsp;the&nbsp;paramaters&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;fetch&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;of&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
The above code will produce the following:
</p>
<div class="displaybox">
Connected to database<br>
6<br>
wallaby<br>
bruce
</div>

<p>
Errr, what was that?<br>
What is this name = :variable business<br>
What we have done is bind the variable named $animal_id and $animal_name
 to the statement. Remember this as many find it difficult to grasp. You
 are not binding the value of the variable, you are binding the variable
 itself. Lets change the value of the animal_id after the variable is 
bound and see what happens..
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;some&nbsp;variables&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;prepare&nbsp;the&nbsp;SQL&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals&nbsp;WHERE&nbsp;animal_id&nbsp;=&nbsp;:animal_id&nbsp;AND&nbsp;animal_name&nbsp;=&nbsp;:animal_name"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;bind&nbsp;the&nbsp;paramaters&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;animal_id&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
Now see the results have changed
</p>
<div class="displaybox">
Connected to database<br>
3<br>
lizard<br>
bruce
</div>
<p>
Because we have bound the variable $animal_id to the $stmt object any 
change to the value of that varible will be reflected in the statement. 
This format can be used for both SELECT and INSERT statements. But this 
is a bit cumbersome for a single query and the above PDO query could 
have done the job equally as well, so lets run the query multiple times.
 Ssimply by changing the animal_id and animal_name variables we can run 
the query over and over without re-writing as it is already 'prepared'.
</p>
<div class="codebox">
<code>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;some&nbsp;variables&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;prepare&nbsp;the&nbsp;SQL&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals&nbsp;WHERE&nbsp;animal_id&nbsp;=&nbsp;:animal_id&nbsp;AND&nbsp;animal_name&nbsp;=&nbsp;:animal_name"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;bind&nbsp;the&nbsp;paramaters&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;animal_id&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'kevin'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;animal_id&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;animal_id&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$animal_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></code>
</div>
<p>
Now we have run the query 3 times using the same prepared statement. The results look like this:
</p>
<div class="displaybox">
Connected to database<br>
7<br>
wombat<br>
bruce<br>
4<br>
dingo<br>
bruce
</div>
<p>
The second result set is missing as there is no animal named \'kevin\', 
all Australians are named \'bruce\'. Note also in the above code we have
 changed the loop from foreach and PDOStatement::fetchAll() to a while 
loop using PDOStatement::fetch()As has been mentioned we can run this 
over and over, but while it is shorter than coding the query over and 
over, we can also use an array of values!
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;some&nbsp;variables&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;prepare&nbsp;the&nbsp;SQL&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals&nbsp;WHERE&nbsp;animal_id&nbsp;=&nbsp;:animal_id&nbsp;AND&nbsp;animal_name&nbsp;=&nbsp;:animal_name"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;bind&nbsp;the&nbsp;paramaters&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':animal_name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$animal_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;variables&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'animal_name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;variables&nbsp;again&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'animal_name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;reassign&nbsp;the&nbsp;variables&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">9</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'animal_name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bruce'</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;execute&nbsp;the&nbsp;prepared&nbsp;statement&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>

<h2><a class="anchor" name="11">Transactions</a></h2>
<p>
At the beginning of this tutorial was saw multiple INSERT statements to 
set up the initial database. This works fine but is code intensive and 
with a database like SQLite a problem arises with file locking for each 
access. The process can be bundled into a single access by using a 
transaction. Transactions are quite simple and have the benifit of 
rolling back changes should an error occur, perhaps a system crash. 
</p>
<p>
A PDO transaction begins with the with PDO::beginTransaction() method. 
This method turns off auto-commit and any database statements or queries
 are not committed to the database until the transaction is committed 
with PDO::commit. When PDO::commit is called, all statements/queries are
 enacted and the database connection is returned to auto-commit mode.
</p>
<p>
This example shows how we might set up the animals database used in this tutorial.
</p>
<div class="codebox">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;database&nbsp;name&nbsp;***/<br></span><span style="color: #0000BB">$dbname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'animals'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=</span><span style="color: #0000BB">$dbname</span><span style="color: #DD0000">"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;PDO&nbsp;error&nbsp;mode&nbsp;to&nbsp;exception&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;begin&nbsp;the&nbsp;transaction&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beginTransaction</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;CREATE&nbsp;table&nbsp;statements&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$table&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"CREATE&nbsp;TABLE&nbsp;animals&nbsp;(&nbsp;animal_id&nbsp;MEDIUMINT(8)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT&nbsp;PRIMARY&nbsp;KEY,<br>&nbsp;&nbsp;&nbsp;&nbsp;animal_type&nbsp;VARCHAR(25)&nbsp;NOT&nbsp;NULL,<br>&nbsp;&nbsp;&nbsp;&nbsp;animal_name&nbsp;VARCHAR(25)&nbsp;NOT&nbsp;NULL&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;)"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;&nbsp;INSERT&nbsp;statements&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('emu',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('funnel&nbsp;web',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('lizard',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('dingo',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('kangaroo',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('wallaby',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('wombat',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('koala',&nbsp;'bruce')"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals&nbsp;(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('kiwi',&nbsp;'bruce')"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;commit&nbsp;the&nbsp;transaction&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">commit</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;to&nbsp;say&nbsp;the&nbsp;database&nbsp;was&nbsp;created&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Data&nbsp;entered&nbsp;successfully&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;roll&nbsp;back&nbsp;the&nbsp;transaction&nbsp;if&nbsp;we&nbsp;fail&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rollback</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;the&nbsp;sql&nbsp;statement&nbsp;and&nbsp;error&nbsp;message&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="12">Get Last Insert Id</a></h2>
<p>
This is a common task required when you need to get the id of the last 
INSERT. This is done with PDO::lastInserId() method as shown here.
</p>
<div class="codebox">
<code><span style="color: #000000">
<br><span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;hostname&nbsp;***/<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;username&nbsp;***/<br></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/***&nbsp;mysql&nbsp;password&nbsp;***/<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">;<br><br>try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;dbname=animals"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;echo&nbsp;a&nbsp;message&nbsp;saying&nbsp;we&nbsp;have&nbsp;connected&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Connected&nbsp;to&nbsp;database&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;set&nbsp;the&nbsp;error&nbsp;reporting&nbsp;attribute&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;INSERT&nbsp;a&nbsp;new&nbsp;row&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;animals(animal_type,&nbsp;animal_name)&nbsp;VALUES&nbsp;('galah',&nbsp;'polly')"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;display&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;last&nbsp;INSERT&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">lastInsertId</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;close&nbsp;the&nbsp;database&nbsp;connection&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></div>


<h2><a class="anchor" name="13">A Global Instance</a></h2>
<p>
Ever need a global instance of your database connection? Here we achieve
 this with the use of the Singleton design patern. The goal of a 
singleton is to ensure the class has only a single instance and provide a
 global point of access to it. Here we use the getInstance() method to 
achieve this. A new instance is only created the first time it is 
accessed and all subsequent accesses are simply returned the existing 
instance.
</p>
<div class="codebox">
<code><span style="color: #000000">
<br><span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">db</span><span style="color: #007700">{<br><br></span><span style="color: #FF8000">/***&nbsp;Declare&nbsp;instance&nbsp;***/<br></span><span style="color: #007700">private&nbsp;static&nbsp;</span><span style="color: #0000BB">$instance&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/**<br>*<br>*&nbsp;the&nbsp;constructor&nbsp;is&nbsp;set&nbsp;to&nbsp;private&nbsp;so<br>*&nbsp;so&nbsp;nobody&nbsp;can&nbsp;create&nbsp;a&nbsp;new&nbsp;instance&nbsp;using&nbsp;new<br>*<br>*/<br></span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">()&nbsp;{<br>&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;maybe&nbsp;set&nbsp;the&nbsp;db&nbsp;name&nbsp;here&nbsp;later&nbsp;***/<br></span><span style="color: #007700">}<br><br></span><span style="color: #FF8000">/**<br>*<br>*&nbsp;Return&nbsp;DB&nbsp;instance&nbsp;or&nbsp;create&nbsp;intitial&nbsp;connection<br>*<br>*&nbsp;@return&nbsp;object&nbsp;(PDO)<br>*<br>*&nbsp;@access&nbsp;public<br>*<br>*/<br></span><span style="color: #007700">public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()&nbsp;{<br><br>if&nbsp;(!</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$instance</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$instance&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host='localhost';dbname='animals'"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">);;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$instance</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>return&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$instance</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">/**<br>*<br>*&nbsp;Like&nbsp;the&nbsp;constructor,&nbsp;we&nbsp;make&nbsp;__clone&nbsp;private<br>*&nbsp;so&nbsp;nobody&nbsp;can&nbsp;clone&nbsp;the&nbsp;instance<br>*<br>*/<br></span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">__clone</span><span style="color: #007700">(){<br>}<br><br>}&nbsp;</span><span style="color: #FF8000">/***&nbsp;end&nbsp;of&nbsp;class&nbsp;***/<br><br></span><span style="color: #007700">try&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;query&nbsp;the&nbsp;database&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DB</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;animals"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/***&nbsp;loop&nbsp;over&nbsp;the&nbsp;results&nbsp;***/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_type'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">'&nbsp;-&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal_name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>catch(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
The above code will produce a result like this:
</p><div class="displaybox">
emu - bruce<br>
funnel web - bruce<br>
lizard - bruce<br>
dingo - bruce<br>
kangaroo - bruce<br>
wallaby - bruce<br>
wombat - bruce<br>
koala - bruce
</div>
<p>
This method of access saves the overhead created when a new instance of 
an object is called each time it is referenced, so you have have few 
references to it. Also, if you wish to pass the objects state from one 
reference to another there is no need to create from the initial state.
</p>
<p>
Note that the constructor and clone methods have been made private to 
ensure that an instance of the class cannot be instantiated or cloned.
</p>



<a class="anchor" name="50"><h2>Conclusions.</h2></a>
<p>
If you have got this far you will have seen how to create a connection, prepare a statement and exceute, 
and to bind Params using bindParam(). This is what most folks will be using to begin with and shows the
effectiveness of using PDO to make code more portable. We highly recommend you visit <a href="http://www.php.net/manual/en/ref.pdo.php">
http://www.php.net/manual/en/ref.pdo.php</a> and read up on all that PDO has to offer. 

</p>



</div>
<!--content ends -->
</div>

<div id="right">
<div id="download">


<!-- <a href=""><img src="/images/white.jpg" alt="Download" name="Download" /></a><br /> -->

<h4>Support PHPRO.ORG</h4>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input name="cmd" value="_s-xclick" type="hidden">
<input name="encrypted" value="-----BEGIN PKCS7-----MIIHLwYJKoZIhvcNAQcEoIIHIDCCBxwCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYC93iJS46HhQhALDbw2nCmB27YvPAg6BXGNYFCjIefn1kVGep/dgCZn5Ht9RPKYFxKi67maaICiLv0k3+AopmiuhfagZq5Zfpb1LOVQl4OLvPOh8ONKXbypkPqYx2XyL51pWYyW/Ds0m/BX8JNDZlDyiO1W0y6fzBp2AI14aUmJyjELMAkGBSsOAwIaBQAwgawGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIKkOqeDWlaM2AgYjiPCbQXAGvLFyHR+P0TKE16zliwFfnzSw9UjdMqd3JGCZldEwr8/R/+2mC2MTtSfavWdVLoN/HLWEB2HatgZ+dow3i7tXrB3iI9Kt9Vj6mndU8ZC1rtVBCl5l0k8TDl7Lyy5AnGSrcN2T5voBMDudtn3gb8PDiQKp2IHC1VW6lgaS7PorbzKASoIIDhzCCA4MwggLsoAMCAQICAQAwDQYJKoZIhvcNAQEFBQAwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMB4XDTA0MDIxMzEwMTMxNVoXDTM1MDIxMzEwMTMxNVowgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDBR07d/ETMS1ycjtkpkvjXZe9k+6CieLuLsPumsJ7QC1odNz3sJiCbs2wC0nLE0uLGaEtXynIgRqIddYCHx88pb5HTXv4SZeuv0Rqq4+axW9PLAAATU8w04qqjaSXgbGLP3NmohqM6bV9kZZwZLR/klDaQGo1u9uDb9lr4Yn+rBQIDAQABo4HuMIHrMB0GA1UdDgQWBBSWn3y7xm8XvVk/UtcKG+wQ1mSUazCBuwYDVR0jBIGzMIGwgBSWn3y7xm8XvVk/UtcKG+wQ1mSUa6GBlKSBkTCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb22CAQAwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQCBXzpWmoBa5e9fo6ujionW1hUhPkOBakTr3YCDjbYfvJEiv/2P+IobhOGJr85+XHhN0v4gUkEDI8r2/rNk1m0GA8HKddvTjyGw/XqXa+LSTlDYkqI8OwR8GEYj4efEtcRpRYBxV8KxAW93YDWzFGvruKnnLbDAF6VR5w/cCMn5hzGCAZowggGWAgEBMIGUMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTEwMjI0MDI1MDE0WjAjBgkqhkiG9w0BCQQxFgQUE07jsDg43/UdK3FcQhfTI8BwA24wDQYJKoZIhvcNAQEBBQAEgYBLUmlIkistexK+Mi49seUyiojNJ5VY13MJqoh+iXuNjhTXZLHTH7Ua1E4aH2LZPFttbl4mjAhY+IGVSmYdHRJoFrPTeMeGnrkFLO3bs0NAHnI4eb0iwOagGL/CvGS5DcBFilJzvi24tGz2dQPjKNqQGJu2/hv18y/Ed5EuPvQb1g==-----END PKCS7-----
" type="hidden">
<input src="Introduction-to-PHP-PDO_elemei/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!" type="image" border="0">
<img alt="" src="Introduction-to-PHP-PDO_elemei/pixel.gif" width="1" border="0" height="1">
</form>


<h3>Search</h3>
<form method="get" action="http://www.phpro.org/search" target="_top">
<table bgcolor="#ffffff" border="0">
<tbody><tr><td valign="top" align="left" height="32" nowrap="nowrap">

</td>
<td nowrap="nowrap">
<input name="domains" value="www.phpro.org" type="hidden">
<label for="sbi" style="display: none">Enter your search terms</label>
<input name="q" size="31" maxlength="255" id="sbi" type="text">
</td></tr>
<tr>
<td>&nbsp;</td>
<td nowrap="nowrap">
	<table>
	<tbody><tr>
	<td>
	<input name="sitesearch" value="" id="ss0" type="radio">
	<label for="ss0" title="Search the Web"><font size="-1" color="#000000">Web</font></label></td>
	<td>
	<input name="sitesearch" value="www.phpro.org" checked="checked" id="ss1" type="radio">
	<label for="ss1" title="Search www.phpro.org"><font size="-1" color="#000000">www.phpro.org</font></label></td>
	</tr>
	</tbody></table>
<label for="sbb" style="display: none">Submit search form</label>
<input name="sa" value="Google Search" id="sbb" type="submit">
<input name="client" value="pub-1399602330070151" type="hidden">
<input name="forid" value="1" type="hidden">
<input name="ie" value="ISO-8859-1" type="hidden">
<input name="oe" value="ISO-8859-1" type="hidden">
<input name="safe" value="active" type="hidden">
<input name="cof" value="GALT:#E1771E;GL:1;DIV:#999999;VLC:336633;AH:center;BGC:FFFFFF;LBGC:FF9900;ALC:E1771E;LC:E1771E;T:000000;GFNT:666666;GIMP:666666;FORID:11" type="hidden">
<input name="hl" value="en" type="hidden">
</td></tr>
</tbody></table>
</form>


<h3>PHPRO.ORG Poll</h3>
<!-- the poll form -->
<br>
<div id="poll">
<form action="/poll" id="poll_form" method="post">
<h3>Which Database?</h3><input name="poll_response_id" onclick="this.form.submit()" value="26" type="radio"> MySQL<br>
<input name="poll_response_id" onclick="this.form.submit()" value="27" type="radio"> Oracle<br>
<input name="poll_response_id" onclick="this.form.submit()" value="28" type="radio"> SQL Server<br>
<input name="poll_response_id" onclick="this.form.submit()" value="29" type="radio"> PgSQL<br>
<input name="poll_response_id" onclick="this.form.submit()" value="30" type="radio"> Sybase<br>
<input name="poll_response_id" onclick="this.form.submit()" value="31" type="radio"> DB2<br>
<input name="poll_response_id" onclick="this.form.submit()" value="32" type="radio"> MSSQL<br>
</form>
</div>
<!-- end poll form -->
<p>
<b>Warning:</b> Participation in PHPRO.ORG polls may incorrectly lead you to believe your opinions matter.
</p>

<h4><a href="http://www.phpro.org/rss/all.rss"><img src="Introduction-to-PHP-PDO_elemei/rss_go.png" alt="rss"> RSS Feed</a></h4>

<!--
<ul>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
</ul>
-->
</div>
</div>

</div>
<!--content ends -->

<!--footer starts -->
<div id="footer">
<div style="margin-left:20px">
<hr>
I would rather see a sermon than hear one any day. I'd rather have you 
walk with me, than merely point the way. The eye is a more ready pupil 
than ever was the ear, good advice is often confusing, but example is 
always clear.
</div>

<ul class="soc_net">
<li><a href="http://del.icio.us/post/post?url=http://phpro.org/tutorials/Introduction-to-PHP-PDO.html&amp;title=Introduction+to+PHP+PDO"><img src="Introduction-to-PHP-PDO_elemei/delicious.gif" alt="del.icio.us"></a> </li>
<li><a href="http://digg.com/submit?phase=2&amp;url=http://phpro.org//tutorials/Introduction-to-PHP-PDO.html"><img src="Introduction-to-PHP-PDO_elemei/digg.gif" alt="digg it"></a></li>
<li><a href="http://technorati.com/cosmos/search.html?url=http://phpro.org/"><img src="Introduction-to-PHP-PDO_elemei/technorati.gif" alt="techmorati"></a></li>
<li><a href="http://blinklist.com/index.php?Action=Blink/addblink.php&amp;url=http://phpro.org/&amp;Title=Introduction+to+PHP+PDO"><img src="Introduction-to-PHP-PDO_elemei/blinklist.gif" alt="Blinklist"></a></li>
<li><a href="http://furl.net/storeIt.jsp?t=Introduction+to+PHP+PDO&amp;u=http://phpro.org//tutorials/Introduction-to-PHP-PDO.html"><img src="Introduction-to-PHP-PDO_elemei/furl.gif" alt="Furl"></a></li>
<li><a href="http://reddit.com/submit?url=http://phpro.org/tutorials/Introduction-to-PHP-PDO.html&amp;title=Introduction+to+PHP+PDO"><img src="Introduction-to-PHP-PDO_elemei/reddit.gif" alt="Reddit"></a></li>
</ul>
<ul>
<li><a href="http://www.phpro.org/">Home</a></li>
<li><a href="http://www.phpro.org/tutorials">Tutorials</a></li>
<li><a href="http://www.phpro.org/articles">Articles</a></li>
<li><a href="http://www.phpro.org/examples">Examples</a></li>
<li><a href="http://www.phpro.org/classes">Classes</a></li>
<li><a href="http://www.phpro.org/contact">Contact Us</a></li>
</ul>
<p class="copyright">
PHPRO.ORG Tutorials Articles Examples<br>
Copyright 2008 PHPRO.ORG. All Rights Reserved. <a href="http://bangasanga.com/">Banga Sanga</a>
</p>
<p>&nbsp;</p>

</div>
<!--footer ends -->
<!--container ends -->
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Introduction-to-PHP-PDO_elemei/ga.js" type="text/javascript"></script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Introduction-to-PHP-PDO_elemei/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-3491171-1");
pageTracker._trackPageview();
} catch(err) {}</script>





</body></html>